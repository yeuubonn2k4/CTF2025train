= Các bước thực hiện Pentest:

B1: Dò tìm thông tin về mục tiêu

`nmap <IP> -sV (phiên bản) -O (HDH) -p1-65535 (port)`

=> Thông tin về tất cả các loại dịch vũ khác nhau mà chúng ta có thể truy cập vào hệ thống (ví dụ `Apache`,...)

- Sử dụng `dirb` để lấy được tất cả các thư nục và tệp trong đó:

`dirb <http://IP>`

<img width="1116" height="592" alt="image" src="https://github.com/user-attachments/assets/d4805cc5-c1d0-4942-9769-49c966b25669" />

= Nếu muốn xem những gì có trong /cgi-bin:

`dirb <http://ip/cgi-bin/`

=> Tìm ra 1 cái file/ thư mục nào đó để tiến hành khai thác.

B2: Thực hiện `sudo msfconsole` tìm kiếm lỗ hổng mà chúng ta có thể sử dụng như một phần nhắm mục tiêu vào máy chủ, 

`search shellshock` : kiểm tra xem hệ thống có bị shellshock (1 lỗ hổng bảo mật nghiêm trọng được phát hiện trong GNU Bash) hay không.

<img width="1917" height="773" alt="image" src="https://github.com/user-attachments/assets/39c6168d-a792-455c-a7bb-8827215ee8cf" />

=> Có bị 

= Ở đây sẽ thực hiện khai thác bằng :
<img width="1448" height="77" alt="image" src="https://github.com/user-attachments/assets/82a375d1-8c6b-4e03-9a60-fb2b05ad72db" />

=> Sử dụng `use all` 
<img width="1540" height="139" alt="image" src="https://github.com/user-attachments/assets/85b3944b-e107-4168-9a7b-937a02ff9eca" />

=> Có `exploit(multi/http/apache_mod_cgi_bash_env_exec)`

= `Show options` ở đây chúng ta có tiêu đề HTTP:
<img width="1910" height="961" alt="image" src="https://github.com/user-attachments/assets/add6928e-fd62-4907-977a-6e78e17a3193" />

= Các giá trị sẽ gửi gồm `LHOSTS IP mục tiêu, RPATH (đường dẫn), TARGERURI (URI mục tiêu)`, cái file hello_word.sh kia là vừa xác định được khi dùng `dirb`:

<img width="1897" height="268" alt="image" src="https://github.com/user-attachments/assets/fef52e37-8d90-4b56-98c2-44192c6d1231" />

= `exploit` thực hiện khai thác:

<img width="1917" height="915" alt="image" src="https://github.com/user-attachments/assets/0706b2da-b0a9-47b6-9924-208100e6ec72" />

=> Lúc này đã xâm nhập được vào hệ thống

= B4: Leo thang đặc quyền, nâng quyền

= Sử dụng `sysinfo` để lấy thông tin hệ thống
<img width="1564" height="453" alt="image" src="https://github.com/user-attachments/assets/4e329558-4c00-408b-80f7-f58cdf605156" />

= Sử dụng file này để nâng cao đặc quyền: https://github.com/Doge-124/37292.c

= Tạo ra 1 file 37292.c ở linux và copy nội dung vào

= Upload file này ở metasploit:
<img width="1209" height="142" alt="image" src="https://github.com/user-attachments/assets/f9922520-ace5-48eb-9e7d-74a9762a7e81" />

= Nhưng thấy thất bại vì không có đủ quyền. Nghĩ đến cách là tải lên server như apache rồi dùng metasploit tải lại

<img width="1747" height="118" alt="image" src="https://github.com/user-attachments/assets/872ef14c-bf8d-4c8b-84be-b5b158c11413" />

= Sao chép file này vào thư mục `var`

<img width="1474" height="76" alt="image" src="https://github.com/user-attachments/assets/f7de8e51-4bf8-4b27-a089-b89108b37357" />

= `cd /tmp (1 thư mục lưu trữ những file tạm thời)` và thực hiện tải xuống:

<img width="575" height="56" alt="image" src="https://github.com/user-attachments/assets/c31b98b5-77f3-4f6d-be7d-8f73f0e87e3b" />

<img width="1546" height="534" alt="image" src="https://github.com/user-attachments/assets/63bfd1ed-cf8c-4ccb-90b2-01581224eb1f" />

= Thực thi tệp vừa tải xuống:

<img width="1017" height="438" alt="image" src="https://github.com/user-attachments/assets/3c4cc06b-26df-41dd-a13d-783a2aa0678d" />

= Lúc này `whoami` thì tôi đã có quyền root rồi:
<img width="409" height="124" alt="image" src="https://github.com/user-attachments/assets/c1ed266c-b452-4ab2-9fc7-62ace456e3d1" />

= Bây giờ chúng ta có thể xem `shadow`, sửa mk,....

= Sau khi sửa mật khẩu xong chúng ta có thể dùng `ssh` để kết nối bằng mk vừa đổi. 










B5: Duy trì kết nối ra bên ngoài, xóa dấu vết




